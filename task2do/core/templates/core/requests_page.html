<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <title>בקשות</title>
</head>
<body>
    <button id="new request" style="font-size: 30px;">צור בקשה חדשה</button>

    <script>
        var user_type = "{{ user_type }}";
        document.getElementById("new request").addEventListener("click", function() {
            if (user_type === 'manager') {
                location.href = "{% url 'new_association_request' %}";
            }
            else {
                location.href = "{% url 'new_request_submission' %}";
            }
    });
    </script>
    <button id="request_history" style="font-size: 30px;">היסטוריית בקשות</button>

    <script>
        document.getElementById("request_history").addEventListener("click", function() {
            location.href = "{% url 'request_history' %}";
        });
    </script>
    <h1>בקשות אליי</h1>

    <ul>
        {% for request in requests_to_me%}
            <p>{{ request.header }} - {{ request.type }}</p>
            <button id="goto_request{{request.id}}" style="font-size: 15px;">...עוד</button>
            {% if request.type != "ASOC" %}
                <script>
                    document.getElementById("goto_request{{request.id}}").addEventListener("click", function() {
                        location.href = "{% url 'specific_request_view' request.id %}";
                    });
                </script>
            {% else %}
                <script>
                    document.getElementById("goto_request{{request.id}}").addEventListener("click", function() {
                        location.href = "{% url 'view_request_association' request.id %}";
                    });
                </script>
            {% endif %}
        {% endfor %}
    </ul>
    <h1>בקשות שלי</h1>
    <ul>
        {% for request in requests_from_me%}
            <p>
                    {{ request.header }} - {{ request.type }}
            </p>
            <button id="goto_my_request{{request.id}}" style="font-size: 15px;">...עוד</button>
            {% if request.type == "ASOC" %}
            <script>
                document.getElementById("goto_my_request{{request.id}}").addEventListener("click", function() {
                    location.href = "{% url 'view_request_association' request.id %}";
                });
            </script>
            {% else %}
            <script>
                document.getElementById("goto_my_request{{request.id}}").addEventListener("click", function() {
                    location.href = "{% url 'specific_request_view' request.id %}";
                });
            </script>
            {% endif %}
        {% endfor %}
    </ul>

    <button id="backToHome" style="font-size: 15px;">חזור לדף הבית</button>
    <script>
        var user_type = "{{ user_type }}";
        document.getElementById("backToHome").addEventListener("click", function() {
            if (user_type === 'manager') {
                location.href = "{% url 'manager_home_screen' %}";
            }
            else {
                location.href = "{% url 'user_home_screen' %}";
            }
    });
    </script>
</body>
</html>
